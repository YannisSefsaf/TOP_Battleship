(()=>{"use strict";var e,t={133:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initGame=function(){return new n};var r=i(373);class n{constructor(e=null){this.game=e,this.fleet=null,this.currentDirection=null,this.mouseLeaveListener=null,this.playerTurn=null,this.currentShip=null,this.startGameButton=document.querySelector("#startGame"),this.form=document.querySelector("form"),this.playerName=this.form.querySelector("#playerName"),this.positioningBoard=document.querySelector('[data-set="positioningBoard"]'),this.computerGrid=this.positioningBoard.querySelectorAll('[data-set="grid-item"]'),this.currentDirectionDiv=document.querySelector('[data-set="currentDirection"]'),this.playerBoard=document.querySelector('[data-set="playerBoard"]'),this.gridItem=document.querySelectorAll('[data-set="grid-item"]'),this.playerGrid=this.playerBoard.querySelectorAll('[data-set="grid-item"]'),this.datGrid=document.querySelector(".main__container__board"),this.instruction=document.querySelector("#instruction"),this.currentDirectionSelector=document.querySelector("#currentDirection"),this.rotate=document.querySelector(".rotate"),this.playerOneName=document.querySelector('[data-set="playerOne"]'),this.bindEvents()}bindEvents(){this.startGameButton.addEventListener("click",(e=>{e.preventDefault();let t=new r.Player(this.playerName.value);this.fleet=t.fleet,console.log(this.fleet),this.playerOneName.textContent=`${t.name}'s board`;let i=new r.Game(t);this.game=i,this.toggleForm(),this.toggleGrid(),this.updateDirection(),this.placeNextShip()})),this.rotate.addEventListener("click",(()=>{this.currentDirection=this.switchCurrentDirection()}))}startGame(){this.playerTurn=!0,this.activeCells(),this.playTurn(),this.instruction.textContent=`${this.game.playerOne.name}'s turn...`}shipHoverListener(e){const t=Array.from(this.gridItem).indexOf(e.target),i=this.currentShip.size;let r=!1;if(r="horizontal"===this.currentDirection?t%10<=10-i:t<=100-10*(i-1)-1,r)if("horizontal"===this.currentDirection)for(let e=0;e<i;e++){const i=t+e;this.gridItem[i].classList.add("is-active")}else for(let e=0;e<10*i;e+=10){const i=t+e;this.gridItem[i].classList.add("is-active")}}shipClickListener(e){const t=Array.from(this.gridItem).indexOf(e.target),i=this.game.playerOne.playerBoard,r=this.currentShip.size;let n=!1;n="horizontal"===this.currentDirection?t%10<=10-r:t<=100-10*(r-1)-1;const s=[];if("horizontal"===this.currentDirection)for(let e=0;e<r;e++){const r=t+e;i.isCellAvailable(r)||s.push(r)}else for(let e=0;e<10*r;e+=10){const r=t+e;i.isCellAvailable(r)||s.push(r)}if(n&&0===s.length){if(i.setShipOnBoard(this.currentShip,t),"horizontal"===this.currentDirection)for(let e=0;e<r;e++){const i=t+e,r=this.gridItem[i];r.classList.add("is-occupied"),r.classList.remove("is-active")}else for(let e=0;e<10*r;e+=10){const i=t+e,r=this.gridItem[i];r.classList.add("is-occupied"),r.classList.remove("is-active")}this.removeShipEventListeners(this.currentShip),this.placeNextShip()}else console.log(`Unable to add ${this.currentShip.name} on cells ${s}`)}placeShipSequence(){this.shipHoverListener=this.shipHoverListener.bind(this),this.shipClickListener=this.shipClickListener.bind(this),this.mouseLeaveListener=this.mouseLeaveEventListener.bind(this),this.gridItem.forEach((e=>e.addEventListener("mouseenter",this.shipHoverListener))),this.gridItem.forEach((e=>e.addEventListener("click",this.shipClickListener))),this.gridItem.forEach((e=>e.addEventListener("mouseleave",this.mouseLeaveListener)))}removeShipEventListeners(){this.gridItem.forEach((e=>e.removeEventListener("mouseenter",this.shipHoverListener))),this.gridItem.forEach((e=>e.removeEventListener("click",this.shipClickListener))),this.gridItem.forEach((e=>e.removeEventListener("mouseleave",this.mouseLeaveListener)))}placeNextShip(){console.log("here"),console.log(this.fleet),0===this.fleet.length?(console.log("All ships have been placed"),this.togglePlayerBoard(),this.startGame()):(this.currentShip=this.fleet.shift(),console.log("next ship: ",this.currentShip),this.placeShipSequence())}playTurn(){!0===this.playerTurn?this.playerPlay((()=>{this.game.playerOne.playerBoard.checkSunk()||this.game.computer.playerBoard.checkSunk()?this.endGame():(this.instruction.textContent="Computer's turn...",setTimeout((()=>{this.playerTurn=!1,this.playTurn()}),1e3))})):!1===this.playerTurn&&this.computerPlay((()=>{this.game.playerOne.playerBoard.checkSunk()||this.game.computer.playerBoard.checkSunk()?this.endGame():(this.instruction.textContent=`${this.game.playerOne.name}'s turn...`,setTimeout((()=>{this.playerTurn=!0,this.playTurn()}),1e3))}))}playerPlay(e){const t=i=>{const r=Array.from(this.playerGrid).indexOf(i.target);!0!==this.game.computer.playerBoard.checkAttack(r)&&("success"===this.game.computer.playerBoard.receiveAttack(r)?(this.playerGrid[r].classList.add("is-hit"),this.playerGrid[r].textContent="O"):(this.playerGrid[r].classList.add("is-missed"),this.playerGrid[r].textContent="X"),this.playerGrid.forEach((e=>e.removeEventListener("click",t))),e())};this.playerGrid.forEach((e=>e.addEventListener("click",t)))}computerPlay(e){let t=this.game.computer.getRandomCell();for(;this.game.playerOne.playerBoard.attackedCells.includes(t);)t=this.game.computer.getRandomCell();"success"===this.game.playerOne.playerBoard.receiveAttack(t)?(this.computerGrid[t].classList.add("is-hit"),this.computerGrid[t].textContent="O"):(this.computerGrid[t].classList.add("is-missed"),this.computerGrid[t].textContent="X"),e()}endGame(){this.game.playerOne.playerBoard.checkSunk()?(this.instruction.textContent="You lost!",alert("YOU LOST!!! LMAO")):this.game.computer.playerBoard.checkSunk()&&(this.instruction.textContent=`${this.game.playerOne.name} won!`,alert(`${this.game.playerOne.name} won!`))}mouseLeaveEventListener(){this.gridItem.forEach((e=>e.classList.remove("is-active")))}togglePlayerBoard(){this.playerBoard.classList.toggle("hide"),this.currentDirectionDiv.classList.toggle("hide")}isActive(e){e.target.classList.add("is-active")}notActive(e){e.target.classList.remove("is-active")}activeCells(){this.playerGrid.forEach((e=>e.addEventListener("mouseenter",this.isActive))),this.playerGrid.forEach((e=>e.addEventListener("mouseleave",this.notActive)))}toggleActive(){this.gridItem.forEach((e=>e.classList.toggle("is-active")))}updateDirection(){return this.currentDirectionSelector.textContent=this.getCurrentDirection(this.mainPlayer),this.currentDirection=this.getCurrentDirection(this.mainPlayer),this.getCurrentDirection(this.mainPlayer)}getCurrentDirection(){return this.game.playerOne.getPlayerBoard().currentDirection}switchCurrentDirection(){let e=this.game.playerOne.getPlayerBoard();return e.switchCurrentDirection(),this.currentDirectionSelector.textContent=this.getCurrentDirection(),this.updateDirection(),e.getCurrentDirection()}toggleForm(){this.form.classList.toggle("hide")}toggleGrid(){this.positioningBoard.classList.toggle("hide"),this.currentDirectionDiv.classList.toggle("hide")}}},373:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=t.Game=t.Computer=t.Board=void 0;class i{constructor(e=null,t=null){this.name=e,this.size=t,this.brokenParts=[],this.isSunk=!1,this.coordinates=[],this.isSet=!1}shootShip(e){this.brokenParts.push(e),this.getHits()===this.size&&(this.isSunk=!0)}getHits(){return this.brokenParts.length}getCoordinates(){return this.coordinates}}class r extends i{constructor(){super("Carrier",5)}}class n extends i{constructor(){super("Battleship",4)}}class s extends i{constructor(){super("Destroyer",3)}}class o extends i{constructor(){super("Submarine",3)}}class a extends i{constructor(){super("PatrolBoat",2)}}class l{constructor(e=[]){this.board=new Array(100).fill(null),this.visitedCells=[],this.attackedCells=[],this.allShipsSunk=!1,this.currentDirection="horizontal",this.fleet=e}setShipOnBoard(e,t){let i=!0;if(i="horizontal"===this.currentDirection?this.canBePlacedHorizontally(t,e.size):this.canBePlacedVertically(t,e.size),i){let i=this.setShipCoordinates(e,t);this.addShipToBoard(i,e.name)}else console.log(`Unable to add boat ${e.name} as the cells are already occupied`)}addShipToBoard(e,t){for(let i of e)this.board[i]=t,this.visitedCells.push(i)}setShipCoordinates(e,t){return this.isShipFit(e,t)&&!e.isSet?(this.fleet.push(e),e.isSet=!0,this.setShipCoordinatesByDirection(e,t)):e.isSet?console.log("Boat already set!"):console.log("Boat not fit!"),e.coordinates}setShipCoordinatesByDirection(e,t){if("vertical"===this.currentDirection)for(let i=0;i<e.size;i++)e.coordinates.push(t+10*i);else if("horizontal"===this.currentDirection)for(let i=0;i<e.size;i++)e.coordinates.push(t+i)}receiveAttack(e){return null==this.board[e]||this.attackedCells.includes(e)?this.attackedCells.includes(e)?"already-attacked":(this.attackedCells.push(e),"empty"):(this.shootShip(e),this.checkSunk(),"success")}checkAttack(e){return!!this.attackedCells.includes(e)}shootShip(e){this.findShip(e).shootShip(e),this.attackedCells.push(e)}checkSunk(){return this.allShipsSunk=this.fleet.every((e=>e.isSunk)),!!this.allShipsSunk&&(console.log("All ships sunk!"),!0)}checkSet(){return this.allShipsSet=this.fleet.every((e=>e.isSet)),!!this.allShipsSet&&(console.log("All ships set!"),!0)}findShip(e){return this.fleet.find((t=>t.name===this.board[`${e}`]))}switchCurrentDirection(){"vertical"===this.currentDirection?this.currentDirection="horizontal":"horizontal"===this.currentDirection&&(this.currentDirection="vertical")}getCurrentDirection(){return this.currentDirection}setCurrentDirection(e){this.currentDirection=e}canShipBePlaced(e,t,i,r){let n=!0;if("horizontal"===t&&r%10<=10-e){for(let t=0;t<e;t++)if(i.includes(r+t)){n=!1;break}}else if("vertical"===t&&r<100-10*(e-1)){for(let t=0;t<e;t++)if(i.includes(r+10*t)){n=!1;break}}else n=!1;return n}isCellAvailable(e){return!this.visitedCells.includes(e)}isShipFit(e,t){let i=!1;return i="horizontal"===this.currentDirection?t%10<=10-e.size:t<100-10*(e.size-1),i}canBePlacedHorizontally(e,t){let i=!0;for(let r=0;r<t;r++)if(!this.isCellAvailable(e+r)){i=!1;break}return i}canBePlacedVertically(e,t){let i=!0;for(let r=0;r<t;r++)if(!this.isCellAvailable(e+10*r)){i=!1;break}return i}}t.Board=l;class c{constructor(e,t=[]){this.name=e,this.playerBoard=new l,this.carrier=new r,this.battleship=new n,this.destroyer=new s,this.submarine=new o,this.patrolBoat=new a,this.fleet=t,this.fleet.push(this.carrier,this.battleship,this.destroyer,this.submarine,this.patrolBoat)}getPlayerBoard(){return this.playerBoard}checkSet(){return this.allShipsSet=this.fleet.every((e=>e.isSet)),!!this.allShipsSet&&(console.log("All ships set!"),!0)}}t.Player=c;class h extends c{constructor(){super(),this.name="Computer",this.availableCells=new Set,this.generateSet(),this.setShipsRandomly()}generateSet(){for(let e=0;e<100;e++)this.availableCells.add(e.toString())}getRandomCell(){const e=Math.floor(Math.random()*this.availableCells.size),t=[...this.availableCells][e];return this.availableCells.delete(t),t}setShipRandomly(e){let t,i,r;do{t=this.getRandomCell(),i=["horizontal","vertical"][Math.floor(2*Math.random())],r=this.playerBoard.canShipBePlaced(e.size,i,this.playerBoard.visitedCells,parseInt(t))}while(!r);const n=parseInt(t);this.playerBoard.setCurrentDirection(i),this.playerBoard.setShipOnBoard(e,n)}setShipsRandomly(){this.setShipRandomly(this.carrier),this.setShipRandomly(this.battleship),this.setShipRandomly(this.destroyer),this.setShipRandomly(this.submarine),this.setShipRandomly(this.patrolBoat)}}t.Computer=h,t.Game=class{constructor(e=null){if(!(e instanceof c))throw new Error("Invalid playerOne");this.playerOne=e,this.computer=new h}}},426:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(81),n=i.n(r),s=i(645),o=i.n(s)()(n());o.push([e.id,"* {\n  box-sizing: border-box;\n}\n\nh1,\nh3 {\n  text-align: center;\n  padding-top: 1rem;\n}\n\n.rotate {\n  height: 20px;\n  width: 20px;\n}\n\np {\n  margin-top: 0.5rem;\n}\n\n.current__direction {\n  width: 1%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.row-span-5 {\n  grid-row: span 5;\n}\n\n.main__container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  gap: 200px;\n}\n\n.grid-item {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.placement {\n  width: 99%;\n}\n\n.main__container__board__grid {\n  height: 500px;\n  height: 100%;\n  display: grid;\n  grid-template-columns: repeat(11, 40px);\n  grid-template-rows: repeat(11, 40px);\n}\n\n.grid-item {\n  height: 100%;\n  border: 1px solid black;\n}\n\n.legend {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.is-hit {\n  box-sizing: border-box;\n  border: 4px solid lightgreen !important;\n  scale: 1.1;\n  z-index: 9999;\n  cursor: pointer;\n}\n\n.is-active {\n  box-sizing: border-box;\n  border: 4px solid lightgreen;\n  scale: 1.1;\n  z-index: 1;\n  cursor: pointer;\n}\n\n.is-occupied {\n  box-sizing: border-box;\n  border: 4px solid orange;\n  scale: 1.1;\n  z-index: 1;\n  cursor: not-allowed;\n}\n\n.is-missed {\n  box-sizing: border-box;\n  border: 4px solid red;\n  scale: 1.1;\n  z-index: 1;\n  cursor: not-allowed;\n}\n\n.button__container {\n  display: flex;\n  justify-content: center;\n}\n\n.button {\n  border: 1px solid black;\n  padding: 0.625rem 1.25rem;\n  border-radius: 6px;\n  background-color: blue;\n  color: white;\n}\n\n.hide {\n  display: none;\n}\n\nform {\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto;\n  gap: 5px;\n  padding: 5rem;\n}\n\n.player-name {\n  text-align: center;\n  padding-top: 0.5rem;\n  padding-left: 0.75rem;\n  font-weight: bold;\n}\n",""]);const a=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",r=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),r&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),r&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,r,n,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var h=[].concat(e[c]);r&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),t.push(h))}},t}},81:e=>{e.exports=function(e){return e[1]}},654:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var r=i(379),n=i.n(r),s=i(795),o=i.n(s),a=i(569),l=i.n(a),c=i(565),h=i.n(c),d=i(216),u=i.n(d),p=i(589),m=i.n(p),g=i(426),y={};y.styleTagTransform=m(),y.setAttributes=h(),y.insert=l().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=u(),n()(g.Z,y);const f=g.Z&&g.Z.locals?g.Z.locals:void 0},379:e=>{var t=[];function i(e){for(var i=-1,r=0;r<t.length;r++)if(t[r].identifier===e){i=r;break}return i}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],h=s[c]||0,d="".concat(c," ").concat(h);s[c]=h+1;var u=i(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var m=n(p,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var s=r(e=e||[],n=n||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=i(s[o]);t[a].references--}for(var l=r(e,n),c=0;c<s.length;c++){var h=i(s[c]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}s=l}}},569:e=>{var t={};e.exports=function(e,i){var r=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,n&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},i={};function r(e){var n=i[e];if(void 0!==n)return n.exports;var s=i[e]={id:e,exports:{}};return t[e](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0,e=r(133),r(654),(0,e.initGame)()})();